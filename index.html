<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–¢–≤–æ–π –¶–≤–µ—Ç–æ—á–µ–∫ ‚Äî –±—É–∫–µ—Ç—ã —Å –ª—é–±–æ–≤—å—é</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    :root {
      --accent: #ff6b9d;
      --bg-main: #ffdde1;
      --bg-card: white;
      --text: #2d2d2d;
      --wrap-color: #4ecdc4;
      --ribbon-color: #ffbe0b;
      --cart-color: #06d6a0;
      --shadow: rgba(0, 0, 0, 0.12);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, sans-serif;
    }

    body {
      background-color: var(--bg-main);
      color: var(--text);
      scroll-behavior: smooth;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      background: var(--bg-card);
      box-shadow: 0 2px 12px var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      font-size: 1.6rem;
      font-weight: 800;
      color: var(--accent);
    }

    .telegram-note {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.85rem;
    }

    .telegram-note i {
      color: #2a9d8f;
    }

    .hero {
      text-align: center;
      padding: 3rem 1.5rem 2.5rem;
      background: linear-gradient(to bottom, var(--bg-main), var(--bg-card));
    }

    .hero h1 {
      font-size: 2.1rem;
      margin-bottom: 1rem;
      color: var(--accent);
    }

    .hero p {
      font-size: 1.05rem;
      max-width: 600px;
      margin: 0 auto 1.5rem;
      line-height: 1.6;
    }

    .section {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem 3rem;
    }

    .section-title {
      text-align: center;
      font-size: 1.7rem;
      margin: 2.5rem 0 1.5rem;
      color: var(--wrap-color);
    }

    .bouquets {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1.8rem;
    }

    .bouquet-card {
      background: var(--bg-card);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 6px 16px var(--shadow);
      transition: transform 0.3s ease;
    }

    .bouquet-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 10px 24px var(--shadow);
    }

    .bouquet-img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }

    .bouquet-info {
      padding: 1.2rem;
    }

    .bouquet-info h3 {
      font-size: 1.15rem;
      margin-bottom: 0.5rem;
    }

    .price {
      color: var(--accent);
      font-weight: 800;
      margin: 0.6rem 0;
      font-size: 1.1rem;
    }

    .btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.65rem 1.3rem;
      border-radius: 32px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.2s;
    }

    .btn:hover {
      background: #ff528a;
    }

    .custom-section {
      background: var(--bg-card);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 6px 20px var(--shadow);
    }

    .flowers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 1.2rem;
      margin: 1rem 0;
    }

    .flower-option {
      background: #fff9fb;
      padding: 1.1rem;
      border-radius: 14px;
      text-align: center;
      border: 2px solid #fff0f3;
    }

    .flower-option label {
      display: block;
      margin-bottom: 0.6rem;
      font-weight: 700;
      font-size: 0.95rem;
    }

    .quantity-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.4rem;
    }

    .quantity-btn {
      width: 30px;
      height: 30px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 50%;
      font-weight: bold;
      cursor: pointer;
    }

    .quantity-input {
      width: 44px;
      text-align: center;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 0.25rem;
      font-weight: 600;
    }

    .option-group h4 {
      margin: 1.6rem 0 0.8rem;
      color: var(--wrap-color);
    }

    .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 0.5rem;
    }

    .radio-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 0.8rem;
      background: #f8fbfa;
      border-radius: 12px;
      border: 1px solid #e0f2f1;
    }

    .custom-total {
      text-align: center;
      font-size: 1.3rem;
      font-weight: 800;
      margin: 1.6rem 0;
      color: var(--accent);
    }

    .cart-fab {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--cart-color);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      box-shadow: 0 4px 14px rgba(6, 214, 160, 0.4);
      cursor: pointer;
      z-index: 90;
    }

    .cart-modal {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: var(--bg-card);
      border-top-left-radius: 24px;
      border-top-right-radius: 24px;
      padding: 1.8rem;
      transform: translateY(100%);
      transition: transform 0.4s;
      box-shadow: 0 -4px 24px var(--shadow);
      z-index: 99;
    }

    .cart-modal.open {
      transform: translateY(0);
    }

    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.2rem;
    }

    .cart-header h3 {
      color: var(--accent);
    }

    .close-cart {
      font-size: 1.9rem;
      cursor: pointer;
      color: #aaa;
    }

    .cart-items {
      max-height: 300px;
      overflow-y: auto;
      padding-right: 0.5rem;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 0;
      border-bottom: 1px solid #eee;
    }

    .delete-item {
      background: #ffefef;
      color: #ff4d6d;
      border: none;
      width: 26px;
      height: 26px;
      border-radius: 50%;
      font-size: 1rem;
      cursor: pointer;
      margin-left: 0.8rem;
      font-weight: bold;
    }

    .cart-total {
      font-size: 1.4rem;
      font-weight: 800;
      margin: 1.2rem 0;
      text-align: right;
    }

    footer {
      text-align: center;
      padding: 2.2rem 1.5rem;
      background: var(--bg-card);
      margin-top: 2.5rem;
      color: var(--text);
    }

    .support-btn {
      background: #2a9d8f;
      color: white;
      border: none;
      padding: 0.75rem 1.6rem;
      border-radius: 32px;
      font-weight: 700;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

<header>
  <div class="logo">–¢–≤–æ–π –¶–≤–µ—Ç–æ—á–µ–∫</div>
  <div class="telegram-note">
    <i class="fab fa-telegram"></i>
    <span>–ó–∞–∫–∞–∑ —á–µ—Ä–µ–∑ Telegram ‚Äî –±—ã—Å—Ç—Ä–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ</span>
  </div>
</header>

<section class="hero">
  <h1>–°–æ–±–µ—Ä–∏ –±—É–∫–µ—Ç —Å–≤–æ–µ–π –º–µ—á—Ç—ã üå∏</h1>
  <p>–í—ã–±–µ—Ä–∏ –≥–æ—Ç–æ–≤—ã–π –∏–ª–∏ —Å–æ–∑–¥–∞–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ‚Äî —Å –Ω—É–∂–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º, —É–ø–∞–∫–æ–≤–∫–æ–π –∏ –ª–µ–Ω—Ç–æ–π.</p>
</section>

<h2 class="section-title">–ì–æ—Ç–æ–≤—ã–µ –±—É–∫–µ—Ç—ã</h2>
<section class="section">
  <div class="bouquets" id="bouquet-list"></div>
</section>

<h2 class="section-title">–°–æ–±—Ä–∞—Ç—å —Å–≤–æ–π –±—É–∫–µ—Ç</h2>
<section class="section">
  <div class="custom-section">
    <div class="option-group">
      <h4>–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:</h4>
      <div class="flowers-grid" id="flowers-grid"></div>
    </div>

    <div class="option-group">
      <h4>–£–ø–∞–∫–æ–≤–∫–∞:</h4>
      <div class="radio-group" id="wraps"></div>
    </div>

    <div class="option-group">
      <h4>–õ–µ–Ω—Ç–æ—á–∫–∞:</h4>
      <div class="radio-group" id="ribbons"></div>
    </div>

    <div class="custom-total">–°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="custom-price">0 ‚ÇΩ</span></div>
    <button class="btn" id="add-custom">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
</section>

<div class="cart-fab" id="cart-fab">
  <i class="fas fa-shopping-bag"></i>
</div>

<div class="cart-modal" id="cart-modal">
  <div class="cart-header">
    <h3>–í–∞—à –∑–∞–∫–∞–∑</h3>
    <span class="close-cart" id="close-cart">&times;</span>
  </div>
  <div class="cart-items" id="cart-items">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
  <div class="cart-total" id="cart-total">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
  <button class="btn" id="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<footer>
  <div class="telegram-note">
    <i class="fab fa-telegram"></i>
    <span>–í—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äî –≤ Telegram</span>
  </div>
  <a href="https://t.me/SMMHIK_BOT" class="support-btn">
    <i class="fab fa-telegram"></i> –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
  </a>
  <p style="margin-top: 1.2rem; font-size: 0.88rem;">–í—Å–µ –∑–∞–∫–∞–∑—ã –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞.</p>
</footer>

<script>
  const bouquets = [
    { id: 1, name: '–í–µ—Å–µ–Ω–Ω–∏–π —Ä–∞—Å—Å–≤–µ—Ç', price: 2490, img: 'https://placehold.co/300x300/ffd1dc/white?text=üíê' },
    { id: 2, name: '–ù–µ–∂–Ω–æ—Å—Ç—å —Ä–æ–∑', price: 3200, img: 'https://placehold.co/300x300/ffccd5/white?text=üåπ' },
    { id: 3, name: '–õ—É–≥–æ–≤–æ–π –≤–µ—Ç–µ—Ä–æ–∫', price: 1890, img: 'https://placehold.co/300x300/d0f4de/white?text=üåº' },
    { id: 4, name: '–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π –ø–∏–æ–Ω', price: 3990, img: 'https://placehold.co/300x300/ffe0e6/white?text=peon' },
  ];

  const flowerTypes = [
    { name: '–†–æ–∑—ã', pricePer: 180 },
    { name: '–ü–∏–æ–Ω—ã', pricePer: 250 },
    { name: '–¢—é–ª—å–ø–∞–Ω—ã', pricePer: 120 },
    { name: '–≠—É—Å—Ç–æ–º–∞', pricePer: 150 },
    { name: '–•—Ä–∏–∑–∞–Ω—Ç–µ–º—ã', pricePer: 90 },
    { name: '–ì–≤–æ–∑–¥–∏–∫–∏', pricePer: 70 },
    { name: '–õ–∏–ª–∏–∏', pricePer: 300 },
    { name: '–û—Ä—Ö–∏–¥–µ–∏', pricePer: 400 },
    { name: '–ì–µ—Ä–±–µ—Ä—ã', pricePer: 110 },
    { name: '–ê–ª—å—Å—Ç—Ä–æ–º–µ—Ä–∏–∏', pricePer: 130 },
    { name: '–§—Ä–µ–∑–∏–∏', pricePer: 160 },
    { name: '–ö–∞–ª–ª—ã', pricePer: 280 }
  ];

  const wraps = [
    { name: '–ö—Ä–∞—Ñ—Ç-–±—É–º–∞–≥–∞', price: 300 },
    { name: '–ö–æ—Ä–æ–±–∫–∞', price: 900 },
    { name: '–ö—Ä—É–∂–µ–≤–Ω–∞—è —Å–µ—Ç–∫–∞', price: 500 }
  ];

  const ribbons = [
    { name: '–†–æ–∑–æ–≤–∞—è', price: 150 },
    { name: '–ë–µ–∂–µ–≤–∞—è', price: 150 },
    { name: '–ó–æ–ª–æ—Ç–æ', price: 200 },
    { name: '–°–µ—Ä–µ–±—Ä–æ', price: 200 }
  ];

  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  let customFlowers = flowerTypes.map(f => ({ ...f, qty: 0 }));
  let selectedWrap = wraps[0];
  let selectedRibbon = ribbons[0];

  // –†–µ–Ω–¥–µ—Ä –∫–∞—Ç–∞–ª–æ–≥–∞
  const list = document.getElementById('bouquet-list');
  bouquets.forEach(b => {
    const el = document.createElement('div');
    el.className = 'bouquet-card';
    el.innerHTML = `
      <img src="${b.img}" alt="${b.name}" class="bouquet-img">
      <div class="bouquet-info">
        <h3>${b.name}</h3>
        <div class="price">${b.price.toLocaleString()} ‚ÇΩ</div>
        <button class="btn add-to-cart" data-id="${b.id}">–í—ã–±—Ä–∞—Ç—å</button>
      </div>
    `;
    list.appendChild(el);
  });

  const grid = document.getElementById('flowers-grid');
  customFlowers.forEach((f, i) => {
    const div = document.createElement('div');
    div.className = 'flower-option';
    div.innerHTML = `
      <label>${f.name}<br><small>${f.pricePer} ‚ÇΩ/—à—Ç</small></label>
      <div class="quantity-controls">
        <button class="quantity-btn minus" data-index="${i}">‚àí</button>
        <input type="number" class="quantity-input" data-index="${i}" min="0" max="20" value="0">
        <button class="quantity-btn plus" data-index="${i}">+</button>
      </div>
    `;
    grid.appendChild(div);
  });

  document.addEventListener('click', e => {
    if (e.target.classList.contains('minus') || e.target.classList.contains('plus')) {
      const i = e.target.dataset.index;
      let val = parseInt(customFlowers[i].qty);
      if (e.target.classList.contains('plus') && val < 20) val++;
      if (e.target.classList.contains('minus') && val > 0) val--;
      customFlowers[i].qty = val;
      document.querySelector(`.quantity-input[data-index="${i}"]`).value = val;
      updateCustomPrice();
    }
    if (e.target.classList.contains('delete-item')) {
      const index = parseInt(e.target.dataset.cartIndex);
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }
  });

  document.addEventListener('input', e => {
    if (e.target.classList.contains('quantity-input')) {
      const i = e.target.dataset.index;
      let val = parseInt(e.target.value) || 0;
      if (val < 0) val = 0;
      if (val > 20) val = 20;
      customFlowers[i].qty = val;
      e.target.value = val;
      updateCustomPrice();
    }
  });

  const wrapsEl = document.getElementById('wraps');
  wraps.forEach(w => {
    const label = document.createElement('label');
    label.className = 'radio-item';
    label.innerHTML = `<input type="radio" name="wrap" data-name="${w.name}" data-price="${w.price}"> ${w.name} (+${w.price} ‚ÇΩ)`;
    if (w === wraps[0]) label.querySelector('input').checked = true;
    wrapsEl.appendChild(label);
  });

  const ribbonsEl = document.getElementById('ribbons');
  ribbons.forEach(r => {
    const label = document.createElement('label');
    label.className = 'radio-item';
    label.innerHTML = `<input type="radio" name="ribbon" data-name="${r.name}" data-price="${r.price}"> ${r.name} (+${r.price} ‚ÇΩ)`;
    if (r === ribbons[0]) label.querySelector('input').checked = true;
    ribbonsEl.appendChild(label);
  });

  document.addEventListener('change', e => {
    if (e.target.matches('input[type="radio"][name="wrap"]')) {
      selectedWrap = { name: e.target.dataset.name, price: +e.target.dataset.price };
    }
    if (e.target.matches('input[type="radio"][name="ribbon"]')) {
      selectedRibbon = { name: e.target.dataset.name, price: +e.target.dataset.price };
    }
    updateCustomPrice();
  });

  function updateCustomPrice() {
    const flowerTotal = customFlowers.reduce((sum, f) => sum + (f.qty * f.pricePer), 0);
    const total = flowerTotal + selectedWrap.price + selectedRibbon.price;
    document.getElementById('custom-price').textContent = total.toLocaleString() + ' ‚ÇΩ';
  }

  document.getElementById('add-custom').addEventListener('click', () => {
    const selected = customFlowers.filter(f => f.qty > 0);
    if (selected.length === 0) {
      alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ü–≤–µ—Ç–æ–∫');
      return;
    }
    const details = selected.map(f => `${f.qty}√ó${f.name}`).join(', ');
    const price = customFlowers.reduce((sum, f) => sum + (f.qty * f.pricePer), 0) + selectedWrap.price + selectedRibbon.price;
    cart.push({
      id: 'custom_' + Date.now(),
      name: `–°–≤–æ–π –±—É–∫–µ—Ç: ${details}`,
      price,
      type: 'custom'
    });
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
  });

  document.addEventListener('click', e => {
    if (e.target.classList.contains('add-to-cart')) {
      const id = +e.target.dataset.id;
      const item = bouquets.find(b => b.id === id);
      cart.push(item);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }
  });

  function renderCart() {
    const itemsEl = document.getElementById('cart-items');
    const totalEl = document.getElementById('cart-total');
    if (cart.length === 0) {
      itemsEl.innerHTML = '<p style="color:#888;text-align:center;">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
      totalEl.textContent = '–ò—Ç–æ–≥–æ: 0 ‚ÇΩ';
      return;
    }
    let html = '';
    let total = 0;
    cart.forEach((item, idx) => {
      total += item.price;
      html += `
        <div class="cart-item">
          <span style="max-width:70%;word-wrap:break-word;">${item.name}</span>
          <div style="display:flex;align-items:center;gap:8px;">
            <span>${item.price.toLocaleString()} ‚ÇΩ</span>
            <button class="delete-item" data-cart-index="${idx}">√ó</button>
          </div>
        </div>
      `;
    });
    itemsEl.innerHTML = html;
    totalEl.textContent = `–ò—Ç–æ–≥–æ: ${total.toLocaleString()} ‚ÇΩ`;
  }

  document.getElementById('cart-fab').addEventListener('click', () => {
    document.getElementById('cart-modal').classList.add('open');
    renderCart();
  });
  document.getElementById('close-cart').addEventListener('click', () => {
    document.getElementById('cart-modal').classList.remove('open');
  });

  // üî• –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ë–õ–û–ö: –ù–ê–î–ï–ñ–ù–û–ï –û–¢–ö–†–´–¢–ò–ï TELEGRAM
  document.getElementById('checkout-btn').addEventListener('click', (e) => {
    e.preventDefault();
    if (cart.length === 0) {
      alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
      return;
    }

    const orderData = {
      items: cart,
      total: cart.reduce((s, i) => s + i.price, 0)
    };

    const jsonStr = JSON.stringify(orderData);
    const b64 = btoa(unescape(encodeURIComponent(jsonStr)));
    const payload = "order_" + b64;
    const telegramLink = `https://t.me/SMMHIK_BOT?start=${encodeURIComponent(payload)}`;

    // –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
    const win = window.open(telegramLink, '_blank');

    // –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω ‚Äî fallback
    if (!win || win.closed || typeof win.closed === 'undefined') {
      if (confirm('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.\n\n–ù–∞–∂–º–∏—Ç–µ ¬´–û–ö¬ª, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –≤—Ä—É—á–Ω—É—é.')) {
        window.location.href = telegramLink;
      }
    }
  });

  renderCart();
</script>

</body>
</html>
